<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>HTML 5 Template</title>

    <link rel="icon" href="favicon.png" type="image/png" sizes="32x32"/>
    <link rel="stylesheet" href="css/styles.css">
    
    <script type="module" src="js/spidergraph.js"></script>

  </head>
  <body>
    <div>
        Some Header
        <p>
          Here is a description of things...
        </p>


    </div>
      <div>
        <exp-spidergraph-comp 
          id = "spiderGraph"
          width="640" 
          height="640"
          radius="275"

          borderThickness = "5"
          borderColor = "#CCC"
          fillColor = "#888"

          axisOffset = "-90"
          axisNames = "Fire,Water,Earth,Air,Metal"
          axisColor = "#CCC"
          axisThickness = "2"
          axisSegments = "7"
          
          > 
        </exp-spidergraph-comp>
      
        <div class="element-indicator" id="indicator-Fire">Fire</div>
        <div class="element-indicator" id="indicator-Water">Water</div>
        <div class="element-indicator" id="indicator-Earth">Earth</div>
        <div class="element-indicator" id="indicator-Air">Air</div>
        <div class="element-indicator" id="indicator-Metal">Metal</div>
      </div>

    <div class="sliderContainer">
      <div>
        <label>Fire</label>
        <input type="range" min="0" max="100" id="range-Fire" oninput="handleChangeSlider(this);"/>
      </div>
      <div>
        <label>Water</label>
        <input type="range" min="0" max="100" id="range-Water" oninput="handleChangeSlider(this);"/>
      </div>
      <div>
        <label>Earth</label>
        <input type="range" min="0" max="100" id="range-Earth" oninput="handleChangeSlider(this);"/>
      </div>
      <div>
        <label>Air</label>
        <input type="range" min="0" max="100" id="range-Air" oninput="handleChangeSlider(this);"/>
      </div>
      <div>
        <label>Metal</label>
        <input type="range" min="0" max="100" id="range-Metal" oninput="handleChangeSlider(this);"/>
      </div>

    </div>
    
  </body>



  <script>
    var graphData = {"Fire":0.4, "Water":0.2, "Earth": .75, "Air":.25, "Metal":.25};
    var spiderGraph = document.getElementById("spiderGraph");

    // Required to allow full creation/load/init of the graph element
    document.addEventListener('DOMContentLoaded', function() 
    {
      var axisEndpoints = spiderGraph.getAxisEndpoints();
      let graphRect = spiderGraph.getBoundingClientRect();
      for(var axisName in axisEndpoints)
      {
        var ele = document.getElementById("indicator-" + axisName);
        var xy = axisEndpoints[axisName];
        var eleOffW = ele.offsetWidth / 2 - graphRect.left;
        var eleoffH = ele.offsetHeight / 2 - graphRect.top;
        ele.style.left = xy[0] - eleOffW  +"px";
        ele.style.top = xy[1] - eleoffH + "px";
      }

      spiderGraph.setGraphData( graphData);
      
        
    }, false);

   
    function handleChangeSlider(theSlider)
    {
      var eleId = theSlider.id;
      var dataName  = eleId.replace("range-", "");
      graphData[dataName] = theSlider.value / 100;
      spiderGraph.setGraphData(graphData);

    }

  </script>

</html>